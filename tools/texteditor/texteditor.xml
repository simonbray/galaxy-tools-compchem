<tool id="texteditor" name="Text editor" version="0.1.0" python_template_version="3.5">
    <macros>
        <xml name="step_params">
            <conditional name="step">
                <param type="select" name="loc" label="">
                    <option value="Position"/>
                    <option value="String"/>
                </param>
                <when value="Position">
                    <param type="integer" name="line" value="" label="Line number"/>
                    <param type="integer" name="pos" value="" label="Character position in line"/>
                </when>
                <when value="String">
                    <param type="text" area="true" name="text" label="String" />
                </when>
            </conditional>
        </xml>
    </macros>
    
    <requirements>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
        head $__tool_directory__/index.html -n 20; echo $input; tail $__tool_directory__/index.html -n 9 > $output
    ]]></command>
    <inputs>
	    <!-- <display>$data</display> -->
	    <!-- <param name="text" type="text" value="test" area="true"/> -->
        <param type="data" name="Input file"/>
        <repeat name="step" title="Add step">
            <conditional name="step_type">
                <param type="select" name="Type of edit">
                    <option value="insert">Insert text or file</option>
                    <option value="replace">Replace a string with text or file</option>
                    <option value="delete">Delete text</option>
                </param>
                <when value="insert">
                    <expand macro="step_params" />
                </when>
                <when value="replace">
                    <expand macro="step_params" />
                    <param type="data,text" name="File" />
                </when>
                <when value="delete">
                    <expand macro="step_params" />
                </when>

            </conditional>
        </repeat>
        
    </inputs>
    <outputs>
        <data format="html" name="output" />
    </outputs>
    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>
